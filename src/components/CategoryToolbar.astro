---
const {
  targetId,
  tags = [],
  placeholder = "Buscar…",
  accent = "#d4b46a",
} = Astro.props
---

<section class="mx-auto max-w-6xl px-4 pb-4">
  <div
    class="flex flex-col gap-3 md:flex-row md:items-center md:justify-between"
  >
    <div class="relative w-full md:w-96">
      <input
        id="q"
        type="search"
        placeholder={placeholder}
        class="w-full bg-transparent border border-white/10 rounded-xl px-3 py-2 text-sm outline-none focus:border-[--accent]"
        style={`--accent:${accent}`}
      />
      <div
        class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 text-white/50"
      >
        ⌕
      </div>
    </div>

    <div class="text-sm text-white/60">
      Mostrando <span id="count">0</span> resultados
    </div>
  </div>

  {
    tags.length > 0 && (
      <div class="mt-3 flex flex-wrap gap-2">
        <button class="chip" data-tag="__all__">
          Todos
        </button>
        {tags
          .sort((a, b) => a.localeCompare(b))
          .map((t) => (
            <button class="chip" data-tag={t}>
              {t}
            </button>
          ))}
      </div>
    )
  }

  <style>
    .chip {
      border: 1px solid rgba(255, 255, 255, 0.1);
      background: rgba(255, 255, 255, 0.03);
      padding: 0.4rem 0.7rem;
      border-radius: 0.75rem;
      font-size: 0.8rem;
      color: rgba(255, 255, 255, 0.85);
      transition:
        background 0.2s ease,
        transform 0.1s ease;
    }
    .chip:hover {
      background: rgba(255, 255, 255, 0.06);
      transform: translateY(-1px);
    }
    .chip.active {
      background: color-mix(in oklab, var(--accent, #d4b46a) 85%, black);
      border-color: transparent;
      color: #1a0e12;
    }
  </style>
</section>
